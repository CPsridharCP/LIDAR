#!/usr/bin/env python
import numpy as np 
import matplotlib.pyplot as plt
import cv2
from math import cos,sin,pi 

lidar_raw = [0.7760000228881836, 0.7720000147819519, 0.7720000147819519, 0.7789999842643738, 0.7720000147819519, 1.2879999876022339, 1.2899999618530273, 1.284999966621399, 0.8939999938011169, 0.460999995470047, 0.43299999833106995, 0.42399999499320984, 0.43700000643730164, 0.4429999887943268, 0.4259999990463257, 0.4699999988079071, 0.0, 0.0, 1.0440000295639038, 1.0570000410079956, 1.0809999704360962, 1.11899995803833, 1.1019999980926514, 1.1360000371932983, 1.1710000038146973, 1.1790000200271606, 1.2410000562667847, 1.253999948501587, 1.2719999551773071, 1.3370000123977661, 1.3609999418258667, 1.4199999570846558, 1.4429999589920044, 1.5169999599456787, 0.0, 0.0, 1.6519999504089355, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.255000114440918, 3.2179999351501465, 3.174999952316284, 3.2750000953674316, 3.3450000286102295, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.1019999980926514, 3.0959999561309814, 3.075000047683716, 3.075000047683716, 3.0160000324249268, 3.002000093460083, 3.0139999389648438, 3.0209999084472656, 2.936000108718872, 2.9630000591278076, 2.9539999961853027, 3.0940001010894775, 2.990000009536743, 3.002000093460083, 3.240000009536743, 0.0, 0.0, 2.3580000400543213, 2.2720000743865967, 2.256999969482422, 2.246000051498413, 2.24399995803833, 1.6679999828338623, 1.7359999418258667, 2.2269999980926514, 2.2039999961853027, 2.1989998817443848, 1.8910000324249268, 1.8669999837875366, 2.1549999713897705, 2.187999963760376, 0.0, 3.134000062942505, 0.0, 0.0, 2.4030001163482666, 2.236999988555908, 2.489000082015991, 2.5859999656677246, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.121000051498413, 1.0570000410079956, 0.9919999837875366, 0.0, 2.1010000705718994, 1.9490000009536743, 1.9600000381469727, 1.9470000267028809, 1.8860000371932983, 1.9190000295639038, 0.0, 1.909999966621399, 1.9589999914169312, 2.4709999561309814, 0.0, 2.489000082015991, 2.5789999961853027, 2.5480000972747803, 2.234999895095825, 2.506999969482422, 2.1670000553131104, 2.068000078201294, 0.0, 1.2960000038146973, 0.0, 2.111999988555908, 0.0, 2.0510001182556152, 0.0, 0.0, 0.0, 2.9040000438690186, 0.0, 0.0, 2.825000047683716, 0.0, 0.0, 0.0, 4.142000198364258, 4.039999961853027, 0.0, 0.0, 3.953000068664551, 3.938999891281128, 4.177000045776367, 4.163000106811523, 3.7730000019073486, 3.743000030517578, 3.7130000591278076, 3.686000108718872, 3.6519999504089355, 3.640000104904175, 3.61299991607666, 0.0, 0.0, 3.697000026702881, 3.6480000019073486, 3.677999973297119, 1.409000039100647, 1.440999984741211, 1.5260000228881836, 1.5149999856948853, 1.5, 1.503999948501587, 1.5089999437332153, 1.496999979019165, 1.5019999742507935, 1.4989999532699585, 1.4919999837875366, 1.4919999837875366, 1.5, 1.7389999628067017, 1.7200000286102295, 1.7580000162124634, 1.7430000305175781, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7920000553131104, 1.4839999675750732, 1.4040000438690186, 1.6330000162124634, 1.5959999561309814, 1.5700000524520874, 1.0260000228881836, 1.2580000162124634, 1.5520000457763672, 1.5440000295639038, 1.531999945640564, 1.534999966621399, 0.0, 0.0, 1.5499999523162842, 1.5640000104904175, 1.5549999475479126, 1.5750000476837158, 1.5889999866485596, 1.6130000352859497, 1.6490000486373901, 1.6670000553131104, 1.7549999952316284, 0.0, 0.0, 0.9800000190734863, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.4779999256134033, 2.4519999027252197, 2.4260001182556152, 2.493000030517578, 0.6420000195503235, 0.6420000195503235, 0.6380000114440918, 0.6809999942779541, 0.6890000104904175, 0.0, 0.0, 2.7829999923706055, 0.0, 3.0769999027252197, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.8540000915527344, 0.0, 0.0, 0.0, 0.0, 0.5839999914169312, 0.0, 2.3259999752044678, 0.0, 0.0, 0.5730000138282776, 0.5740000009536743, 0.574999988079071, 0.5720000267028809, 0.5770000219345093, 0.0, 0.0, 0.0, 2.4040000438690186, 2.4149999618530273, 0.0, 0.0, 2.4700000286102295, 2.4700000286102295, 2.490000009536743, 2.515000104904175, 2.5380001068115234, 2.5409998893737793, 2.630000114440918, 2.6029999256134033, 2.621000051498413, 2.687999963760376, 0.6520000100135803, 0.6520000100135803, 0.6460000276565552, 0.6430000066757202, 0.6869999766349792, 0.6869999766349792, 0.6399999856948853, 0.6460000276565552, 0.652999997138977, 0.6949999928474426, 0.0, 2.5480000972747803, 2.5390000343322754, 2.4739999771118164, 2.490999937057495, 2.3510000705718994, 2.2950000762939453, 2.2699999809265137, 2.2019999027252197, 0.0, 2.4010000228881836, 2.440999984741211, 2.489000082015991, 2.562999963760376, 2.5959999561309814, 2.63700008392334, 0.0, 2.7230000495910645, 2.825000047683716, 3.059999942779541, 2.5160000324249268, 2.447999954223633, 2.4649999141693115, 2.378999948501587, 0.8690000176429749, 0.8690000176429749, 0.8420000076293945, 0.8330000042915344, 0.8299999833106995, 0.8259999752044678, 0.8209999799728394, 0.8159999847412109, 0.8130000233650208, 0.8159999847412109, 0.8119999766349792, 0.7990000247955322, 0.7910000085830688, 0.7850000262260437, 0.7789999842643738, 0.7820000052452087, 0.7839999794960022, 0.7789999842643738, 0.7860000133514404, 0.7900000214576721, 0.7919999957084656, 0.7839999794960022, 0.7820000052452087, 0.7770000100135803, 0.7770000100135803, 0.7820000052452087, 0.7770000100135803, 0.7739999890327454, 0.7799999713897705, 0.7839999794960022, 0.7760000228881836]

cutoff = 0.8

lidar = [0 if x > cutoff else x for x in lidar_raw]

image = np.zeros((1024,1024,3), np.uint8)
centre = (1024/2,1024/2)
cv2.circle(image,centre, 3, (0,0,255), -1)

image_two = image
scale = 500

confidence = [20.0]*360

for i in range(360):
	confidence[i] *= lidar[i]

for i in range(360):
	confidence[i] = 0.5*confidence[i] + 0.25*confidence[i-1] + 0.25*confidence[i+1]
	cv2.line(image,centre,(centre[0]+int(lidar[-1*i]*scale*cos(i*pi/180)),centre[1]+int(lidar[-1*i]*scale*sin(i*pi/180))),(255,0,0),1)

	cv2.line(image_two,centre,(centre[0]+int(confidence[-1*i]*scale*cos(i*pi/180)),centre[1]+int(confidence[-1*i]*scale*sin(i*pi/180))),(255,0,0),1)

cv2.imshow("image",image)
cv2.waitKey(15000)
